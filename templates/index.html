<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator de Dados de Contas de Energia</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Inntag Energia Solar">
                <h1>Extrator de Dados de Contas de Energia</h1>
            </div>
        </header>

        <main>
            <section class="upload-section">
                <div class="upload-container" id="upload-container">
                    <div class="upload-area" id="upload-area">
                        <i class="fas fa-file-pdf fa-3x"></i>
                        <p>Arraste e solte sua conta de energia em PDF aqui ou</p>
                        <label for="file-input" class="upload-button">Selecionar arquivo</label>
                        <input type="file" id="file-input" accept=".pdf" hidden>
                    </div>
                    <div class="file-info" id="file-info" style="display: none;">
                        <div class="file-preview">
                            <i class="fas fa-file-pdf fa-2x"></i>
                            <div class="file-details">
                                <p class="file-name" id="file-name"></p>
                                <p class="file-size" id="file-size"></p>
                            </div>
                        </div>
                        <button class="remove-file" id="remove-file">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="loading" id="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Processando arquivo...</p>
                    </div>
                </div>
            </section>

            <section class="data-section" id="data-section" style="display: none;">
                <div class="tabs">
                    <button class="tab-button active" data-tab="client-data">Dados do Cliente</button>
                    <button class="tab-button" data-tab="consumption-data">Histórico de Consumo</button>
                </div>

                <div class="tab-content">
                    <div class="tab-pane active" id="client-data">
                        <h2>Dados do Cliente</h2>
                        <form id="client-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="name">Nome</label>
                                    <input type="text" id="name" name="name">
                                </div>
                                <div class="form-group">
                                    <label for="cpf">CPF</label>
                                    <input type="text" id="cpf" name="cpf">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="address">Endereço</label>
                                    <input type="text" id="address" name="address">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="neighborhood">Bairro</label>
                                    <input type="text" id="neighborhood" name="neighborhood">
                                </div>
                                <div class="form-group">
                                    <label for="cep">CEP</label>
                                    <input type="text" id="cep" name="cep">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city">Cidade</label>
                                    <input type="text" id="city" name="city">
                                </div>
                                <div class="form-group">
                                    <label for="state">Estado</label>
                                    <input type="text" id="state" name="state">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" name="email" placeholder="Digite o email do cliente">
                                </div>
                                <div class="form-group">
                                    <label for="phone">Telefone</label>
                                    <input type="tel" id="phone" name="phone" placeholder="Digite o telefone do cliente">
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="tab-pane" id="consumption-data">
                        <h2>Histórico de Consumo</h2>
                        <div class="consumption-summary">
                            <div class="summary-card">
                                <h3>Média de Consumo</h3>
                                <p class="avg-consumption" id="avg-consumption">0 kWh</p>
                            </div>
                        </div>
                        <div class="consumption-chart-container">
                            <canvas id="consumption-chart"></canvas>
                        </div>
                        <div class="consumption-table-container">
                            <table class="consumption-table">
                                <thead>
                                    <tr>
                                        <th>Mês/Ano</th>
                                        <th>Consumo (kWh)</th>
                                        <th>Dias</th>
                                    </tr>
                                </thead>
                                <tbody id="consumption-table-body">
                                    <!-- Dados serão inseridos via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="actions">
                    <button class="action-button secondary" id="new-upload">Novo Upload</button>
                    <button class="action-button primary" id="send-data">Enviar Dados</button>
                </div>
            </section>
        </main>

        <div class="notification" id="notification">
            <div class="notification-content">
                <i class="notification-icon"></i>
                <p class="notification-message"></p>
            </div>
            <button class="notification-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
